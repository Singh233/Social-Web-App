class ChatEngine{constructor(e,s,n,a){this.chatBox=$(`#${e}`),this.userEmail=s,this.userName=n,this.userProfile=a,this.socket=io.connect("http://localhost:4000",{transports:["websocket"],secure:!0,reconnect:!0,rejectUnauthorized:!1}),this.userEmail&&this.connectionHandler()}connectionHandler(){let e=this;this.socket.on("connect",(function(){console.log("connection established using sockets...!"),e.socket.emit("join_room",{user_email:e.userEmail,user_name:e.userName,user_profile:e.userProfile,time:(new Date).toLocaleTimeString("en-US",{hour12:!0,hour:"numeric",minute:"numeric"}),chatroom:"codeial"}),e.socket.on("user_joined",(function(e){console.log("a user joined!",e)}))})),$("#send-message").click((function(){let s=$("#chat-message-input").val();""!=s&&e.socket.emit("send_message",{message:s,user_email:e.userEmail,user_name:e.userName,user_profile:e.userProfile,time:(new Date).toLocaleTimeString("en-US",{hour12:!0,hour:"numeric",minute:"numeric"}),chatroom:"codeial"})})),$("#chat-message-input").keypress((function(e){13==e.which&&$("#send-message").click()})),e.socket.on("receive_message",(function(s){console.log("message received",s.message);let n=$("<li>");$("<img>");n.addClass("animate__animated  animate__fadeIn");let a="other-message animate__animated  animate__fadeIn";s.user_email==e.userEmail?(a="self-message",n.append(`<div class="msg-content">\n                                <span>\n                                    ${s.message} <sup>${s.time}</sup> \n                                </span>\n                                <img src="${s.user_profile}">\n                            </div>`)):n.append(`<div class="msg-content">\n                                <img src="${s.user_profile}">\n                                <span>\n                                    ${s.message} <sup>${s.time}</sup> \n                                </span>\n                                \n                            </div>`),n.append($("<sub>",{html:s.user_name})),n.addClass(a),$("#chat-messages-list").append(n),$("#chat-message-input").val("")}))}}