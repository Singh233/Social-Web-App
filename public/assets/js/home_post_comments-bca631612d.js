class PostComments{constructor(e){this.postId=e,this.postContainer=$(`#post-${e}`),this.newCommentForm=$(`#post-${e}-comments-form`),this.createComment(e);let t=this;$(" .delete-comment-button",this.postContainer).each((function(){t.deleteComment($(this))}))}createComment(e){let t=this;this.newCommentForm.submit((function(n){n.preventDefault();$.ajax({type:"post",url:"/comments/create",data:$(this).serialize(),success:function(n){let o=t.newCommentDom(n.data.comment);$(`#post-comments-${e}`).prepend(o),t.deleteComment($(" .delete-comment-button",o)),new ToggleLike($(" .toggle-like-button",o))},error:function(e){}})}))}deleteComment(e){$(e).click((function(t){t.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:function(e){$(`#comment-${e.comment_id}`).remove(),new Noty({theme:"relax",text:e.data.success,type:"success",layout:"topRight",timeout:3e3}).show()},error:function(e){new Noty({theme:"relax",text:"Something went wrong!",type:"error",layout:"topRight",timeout:2e3}).show()}})}))}newCommentDom(e){return $(`<div id="comment-${e._id}" class="comment-display">\n                    <img src="${e.user.avatar}" id="user-profile-img">\n                    <div class="middle-section">\n                        <div class="upper">\n                            <p class="comment-user-name">${e.user.name}&nbsp;&nbsp;</p>\n                            <p class="comment-user-content"> &nbsp;${e.content} </p>\n                        </div>\n                \n                        <div class="bottom">\n                            <p id="comment-time">3m</p>\n                            <p id="reply-button">reply</p>\n                            \n                                <a class="delete-comment-button" href="/comments/destroy/${e._id}"><i class="fa-regular fa-circle-xmark"></i></a>\n                            \n                            \n                \n                        </div>\n                        \n                    </div>\n                \n                    \n                    <a class="toggle-like-button" data-likes="0" href="/likes/toggle/?id=${e._id}&type=Comment"><i style="margin-left: 0px" class="fa-regular fa-heart"></i></a>\n                \n                    <br>\n                </div>\n                \n                `)}}