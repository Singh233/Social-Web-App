class PostComments{constructor(t){this.postId=t,this.postContainer=$(`#post-${t}`),this.newCommentForm=$(`#post-${t}-comments-form`),this.createComment(t);let e=this;$(" .delete-comment-button",this.postContainer).each((function(){e.deleteComment($(this))}))}createComment(t){let e=this;this.newCommentForm.submit((function(n){n.preventDefault();$.ajax({type:"post",url:"/comments/create",data:$(this).serialize(),success:function(n){let o=e.newCommentDom(n.data.comment);$(`#post-comments-${t}`).prepend(o),e.deleteComment($(" .delete-comment-button",o)),new ToggleLike($(" .toggle-like-button",o))},error:function(t){}})}))}deleteComment(t){$(t).click((function(e){e.preventDefault(),$.ajax({type:"get",url:$(t).prop("href"),success:function(t){$(`#comment-${t.comment_id}`).remove(),Toastify({text:"Comment added!",duration:2e3,destination:"",newWindow:!0,close:!0,avatar:"https://cdn-icons-png.flaticon.com/512/845/845646.png?w=1480&t=st=1680445326~exp=1680445926~hmac=0cb88a0841456c7c4b22ff6c8b911a3acb1e1278095990a5368ab134203fb03d",gravity:"top",position:"center",stopOnFocus:!0,style:{background:"#0057D2",borderRadius:"10px"},onClick:function(){}}).showToast()},error:function(t){Toastify({text:"Something went wrong!",duration:2e3,destination:"",newWindow:!0,close:!0,avatar:"https://cdn-icons-png.flaticon.com/512/1160/1160303.png?w=1480&t=st=1680445542~exp=1680446142~hmac=c9f4eeb27a966c0a92628d64cc93b6d47b8b8d4d2834ba1930357bf0bf47c1e9",gravity:"top",position:"center",stopOnFocus:!0,style:{background:"#D20A0A",borderRadius:"10px",color:"white"},onClick:function(){}}).showToast()}})}))}newCommentDom(t){return $(`<div id="comment-${t._id}" class="comment-display">\n                    <img src="${t.user.avatar}" id="user-profile-img">\n                    <div class="middle-section">\n                        <div class="upper">\n                            <p class="comment-user-name">${t.user.name}&nbsp;&nbsp;</p>\n                            <p class="comment-user-content"> &nbsp;${t.content} </p>\n                        </div>\n                \n                        <div class="bottom">\n                            <p id="comment-time">Just now</p>\n                            <p id="reply-button">reply</p>\n                            \n                                <a class="delete-comment-button" href="/comments/destroy/${t._id}">delete</a>\n                            \n                            \n                \n                        </div>\n                        \n                    </div>\n                \n                    \n                    <a class="toggle-like-button" data-likes="0" href="/likes/toggle/?id=${t._id}&type=Comment"><i style="margin-left: 0px" class="fa-regular fa-heart"></i></a>\n                \n                    <br>\n                </div>\n                \n                `)}}