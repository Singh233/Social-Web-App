<div class="left-navigation-container">
  <header id="nav-header">
    <div id="branding">
      <!-- <img id="logo-placeholder" src="<%= assetPath('img/logo1.png') %>"> -->
      <p id="name-placeholder">
        <!-- <i class="fa-solid fa-cloud"></i> -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          fill="none"
          viewBox="0 0 24 24"
          id="planet"
        >
          <path
            fill="#111"
            d="M21.7753 14.1178C21.9225 13.4352 22 12.7266 22 12C22 10.8786 21.8154 9.80031 21.475 8.79386L20.9481 8.75609L20.947 8.75601L20.9374 8.75547C20.9272 8.75492 20.91 8.75409 20.886 8.75324C20.838 8.75154 20.7629 8.74981 20.6632 8.75024C20.4637 8.7511 20.1661 8.76065 19.7895 8.79648C19.0358 8.8682 17.9699 9.04483 16.7431 9.46539C16.4799 9.55561 16.1798 9.71783 15.785 9.95108C15.7058 9.99786 15.623 10.0474 15.537 10.0988C15.2148 10.2915 14.8462 10.5119 14.449 10.7194C13.419 11.2576 12.1263 11.7501 10.437 11.7501C8.01897 11.7501 6.03049 10.9464 4.65621 10.1537C3.96776 9.75653 3.4274 9.35876 3.05652 9.05778C2.87086 8.90711 2.727 8.78015 2.62761 8.68888C2.60946 8.67221 2.59278 8.65673 2.5776 8.6425C2.20363 9.69192 2 10.8222 2 12C2 12.4304 2.02719 12.8544 2.07994 13.2705L2.46407 13.2512L2.46666 13.2511L2.47465 13.2507L2.50174 13.2496C2.52466 13.2488 2.55722 13.2477 2.59884 13.2467C2.68207 13.2447 2.80162 13.243 2.95282 13.2439C3.25506 13.2457 3.68485 13.2577 4.20473 13.2984C5.24158 13.3796 6.65156 13.5759 8.1282 14.0405C8.57883 14.1823 9.02704 14.4139 9.45523 14.646C9.5548 14.7 9.65396 14.7544 9.75352 14.809C10.0999 14.9991 10.4512 15.1917 10.8405 15.3785C11.8204 15.8483 12.9851 16.2502 14.5092 16.2502C15.8918 16.2502 17.1709 15.9058 18.3115 15.4842C18.8824 15.2733 19.4099 15.0464 19.9021 14.8347L19.9204 14.8268C20.3949 14.6227 20.8566 14.4241 21.2628 14.2887L21.7753 14.1178Z"
          ></path>
          <path
            fill="#111"
            d="M21.2059 15.9119C20.9923 15.9989 20.7567 16.1 20.4948 16.2127L20.4846 16.217C19.9984 16.4262 19.4401 16.6663 18.8315 16.8912 17.6047 17.3446 16.1384 17.7502 14.5092 17.7502 12.696 17.7502 11.3065 17.2655 10.1919 16.731 9.7617 16.5247 9.36355 16.3062 9.01266 16.1136 8.91846 16.0619 8.82737 16.0119 8.74028 15.9647 8.31089 15.7319 7.97612 15.5652 7.67802 15.4714 6.34031 15.0505 5.04875 14.8691 4.08765 14.7938 3.60854 14.7563 3.21525 14.7454 2.94414 14.7439 2.80868 14.7431 2.704 14.7446 2.63466 14.7463 2.6 14.7471 2.57419 14.748 2.55782 14.7486L2.54041 14.7493 2.5376 14.7494 2.3849 14.7571C3.58185 18.9391 7.43347 22 12 22 16.1347 22 19.6832 19.4907 21.2059 15.9119zM2.70961 8.293C2.78144 8.22238 2.8744 8.13105 2.99471 8.01296L2.70961 8.293C2.70965 8.2929 2.70956 8.29311 2.70961 8.293zM3.23689 7.17868L3.53408 7.48144 3.53723 7.48459 3.55596 7.50294C3.57392 7.52036 3.60277 7.54786 3.64215 7.58403 3.72096 7.6564 3.84172 7.76321 4.00173 7.89306 4.3222 8.15313 4.79739 8.50343 5.40573 8.85435 6.62502 9.55771 8.35513 10.2501 10.437 10.2501 11.8107 10.2501 12.8622 9.85611 13.7543 9.38998 14.1094 9.20444 14.4292 9.01331 14.7468 8.82347 14.8384 8.76869 14.9299 8.71401 15.022 8.6596 15.4142 8.42789 15.8327 8.1918 16.2567 8.04645 17.6128 7.58156 18.7969 7.38416 19.6474 7.30323 20.073 7.26273 20.4161 7.25129 20.6567 7.25025 20.7105 7.25002 20.7592 7.25031 20.8025 7.2509 19.112 4.12408 15.8041 2 12 2 8.2253 2 4.93908 4.09141 3.23689 7.17868zM21.0228 7.68307L21 8.00617C21.0092 7.87789 21.0165 7.77104 21.0228 7.68307 21.0229 7.68327 21.0227 7.68287 21.0228 7.68307z"
          ></path>
        </svg>
        <span class="s">S</span>anam.<span class="social">Social</span>
      </p>
    </div>
  </header>

  <% if (locals.user) { %>
  <div id="nav-section">
    <!-- <div id="user-name">
                <a href="/users/profile"> <%= user.name %> </li>
            </div> -->
    <!-- <div id="sign-in-button">
                <a href="/users/sign-out">Sign Out</a>
            </div> -->
    <div class="nav-links">
      <a href="/">
        <!-- <i class="fa-solid fa-house"></i> -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          id="home"
        >
          <path
            fill="#200E32"
            d="M6.64373233,18.7821107 L6.64373233,15.7152449 C6.64371685,14.9380902 7.27567036,14.3067075 8.05843544,14.3018198 L10.9326107,14.3018198 C11.7188748,14.3018198 12.3562677,14.9346318 12.3562677,15.7152449 L12.3562677,15.7152449 L12.3562677,18.7732212 C12.3562498,19.4472781 12.9040221,19.995083 13.5829406,20 L15.5438266,20 C16.4596364,20.0023291 17.3387522,19.6427941 17.9871692,19.0007051 C18.6355861,18.3586161 19,17.4867541 19,16.5775231 L19,7.86584638 C19,7.13138763 18.6720694,6.43471253 18.1046183,5.96350064 L11.4429783,0.674268354 C10.2785132,-0.250877524 8.61537279,-0.22099178 7.48539114,0.745384082 C7.48539114,0.745384082 0.967012253,5.96350064 0.967012253,5.96350064 C0.37274068,6.42082162 0.0175522924,7.11956262 0,7.86584638 L0,16.5686336 C0,18.463707 1.54738155,20 3.45617342,20 L5.37229029,20 C5.69917279,20.0023364 6.01348703,19.8750734 6.24547302,19.6464237 C6.477459,19.417774 6.60792577,19.1066525 6.60791706,18.7821107 L6.64373233,18.7821107 Z"
            transform="translate(2.5 2)"
          ></path>
        </svg>
        Home
      </a>
      <p
        class="message-toggle-button message-icon"
        onclick="toggleChatWindow()"
      >
        <!-- <i class="fa-solid fa-paper-plane"></i> -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          fill="none"
          viewBox="0 0 24 24"
          id="chat-round-dots"
        >
          <path
            fill="#111"
            d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 13.5997 2.37562 15.1116 3.04346 16.4525C3.22094 16.8088 3.28001 17.2161 3.17712 17.6006L2.58151 19.8267C2.32295 20.793 3.20701 21.677 4.17335 21.4185L6.39939 20.8229C6.78393 20.72 7.19121 20.7791 7.54753 20.9565C8.88836 21.6244 10.4003 22 12 22Z"
          ></path>
          <path
            fill="#000"
            class="dots-black"
            d="M15 12C15 12.5523 15.4477 13 16 13 16.5523 13 17 12.5523 17 12 17 11.4477 16.5523 11 16 11 15.4477 11 15 11.4477 15 12zM11 12C11 12.5523 11.4477 13 12 13 12.5523 13 13 12.5523 13 12 13 11.4477 12.5523 11 12 11 11.4477 11 11 11.4477 11 12zM7 12C7 12.5523 7.44772 13 8 13 8.55228 13 9 12.5523 9 12 9 11.4477 8.55228 11 8 11 7.44772 11 7 11.4477 7 12z"
          ></path>
        </svg>
        Message
      </p>
      <a href="/users/sign-out">
        <!-- <i class="fa-solid fa-right-from-bracket"></i> -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          enable-background="new 0 0 24 24"
          viewBox="0 0 24 24"
          id="sign-out"
        >
          <path
            d="M17,2H7C5.3,2,4,3.3,4,5v6h8.6l-2.3-2.3c-0.4-0.4-0.4-1,0-1.4c0.4-0.4,1-0.4,1.4,0l4,4c0.4,0.4,0.4,1,0,1.4c0,0,0,0,0,0
          l-4,4c-0.4,0.4-1,0.4-1.4,0c-0.4-0.4-0.4-1,0-1.4l2.3-2.3H4v6c0,1.7,1.3,3,3,3h10c1.7,0,3-1.3,3-3V5C20,3.3,18.7,2,17,2z"
          ></path>
        </svg>
        Log out</a
      >
    </div>

    <div class="sm-nav-links">
      <!-- <i
        onclick="toggleChatWindow()"
        class="message-icon fa-solid fa-paper-plane"
      ></i> -->

      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        fill="none"
        viewBox="0 0 24 24"
        id="chat-round-dots"
        class="message-toggle-button-sm"
        onclick="toggleChatWindow()"
      >
        <path
          fill="#111"
          d="M9 12C9 12.5523 8.55228 13 8 13 7.44772 13 7 12.5523 7 12 7 11.4477 7.44772 11 8 11 8.55228 11 9 11.4477 9 12zM13 12C13 12.5523 12.5523 13 12 13 11.4477 13 11 12.5523 11 12 11 11.4477 11.4477 11 12 11 12.5523 11 13 11.4477 13 12zM17 12C17 12.5523 16.5523 13 16 13 15.4477 13 15 12.5523 15 12 15 11.4477 15.4477 11 16 11 16.5523 11 17 11.4477 17 12z"
        ></path>
        <path
          fill="#111"
          fill-rule="evenodd"
          d="M22.75 12C22.75 6.06294 17.9371 1.25 12 1.25C6.06294 1.25 1.25 6.06294 1.25 12C1.25 13.7183 1.65371 15.3445 2.37213 16.7869C2.47933 17.0021 2.50208 17.2219 2.4526 17.4068L1.857 19.6328C1.44927 21.1566 2.84337 22.5507 4.3672 22.143L6.59324 21.5474C6.77814 21.4979 6.99791 21.5207 7.21315 21.6279C8.65553 22.3463 10.2817 22.75 12 22.75C17.9371 22.75 22.75 17.9371 22.75 12ZM12 2.75C17.1086 2.75 21.25 6.89137 21.25 12C21.25 17.1086 17.1086 21.25 12 21.25C10.5189 21.25 9.12121 20.9025 7.88191 20.2852C7.38451 20.0375 6.78973 19.9421 6.20553 20.0984L3.97949 20.694C3.57066 20.8034 3.19663 20.4293 3.30602 20.0205L3.90163 17.7945C4.05794 17.2103 3.96254 16.6155 3.7148 16.1181C3.09752 14.8788 2.75 13.4811 2.75 12C2.75 6.89137 6.89137 2.75 12 2.75Z"
          clip-rule="evenodd"
        ></path>
      </svg>
      <a href="/users/sign-out" class="logout-button">
        <!-- <i class="logout-icon fa-solid fa-right-from-bracket"></i> -->
        logout
      </a>
    </div>
  </div>

  <div onclick="expandFooter()" class="footer">
    <div class="expanded hide">
      <a href="/users/profile/edit/<%= locals.user.id%>">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          fill="none"
          viewBox="0 0 24 24"
          id="pen-new-round"
        >
          <path
            fill="#111"
            d="M21.1938 2.80624C22.2687 3.88124 22.2687 5.62415 21.1938 6.69914L20.6982 7.19469C20.5539 7.16345 20.3722 7.11589 20.1651 7.04404 19.6108 6.85172 18.8823 6.48827 18.197 5.803 17.5117 5.11774 17.1483 4.38923 16.956 3.8349 16.8841 3.62781 16.8366 3.44609 16.8053 3.30179L17.3009 2.80624C18.3759 1.73125 20.1188 1.73125 21.1938 2.80624zM14.5801 13.3128C14.1761 13.7168 13.9741 13.9188 13.7513 14.0926 13.4886 14.2975 13.2043 14.4732 12.9035 14.6166 12.6485 14.7381 12.3775 14.8284 11.8354 15.0091L8.97709 15.9619C8.71035 16.0508 8.41626 15.9814 8.21744 15.7826 8.01862 15.5837 7.9492 15.2897 8.03811 15.0229L8.99089 12.1646C9.17157 11.6225 9.26191 11.3515 9.38344 11.0965 9.52679 10.7957 9.70249 10.5114 9.90743 10.2487 10.0812 10.0259 10.2832 9.82394 10.6872 9.41993L15.6033 4.50385C15.867 5.19804 16.3293 6.05663 17.1363 6.86366 17.9434 7.67069 18.802 8.13296 19.4962 8.39674L14.5801 13.3128z"
          ></path>
          <path
            fill="#111"
            d="M12 22C17.5228 22 22 17.5228 22 12C22 10.8082 21.7915 9.66511 21.409 8.60519L15.586 14.4283C15.2347 14.7797 14.9708 15.0437 14.6738 15.2753C14.3252 15.5473 13.948 15.7804 13.5488 15.9706C13.2088 16.1327 12.8546 16.2506 12.3833 16.4076L9.45143 17.3849C8.64568 17.6535 7.75734 17.4438 7.15678 16.8432C6.55621 16.2427 6.34651 15.3543 6.61509 14.5486L7.59236 11.6167C7.74936 11.1453 7.86732 10.7912 8.02935 10.4512C8.21958 10.052 8.45272 9.6748 8.72466 9.32615C8.9563 9.02918 9.22033 8.76527 9.57173 8.41403L15.3948 2.59098C14.3349 2.20849 13.1918 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
          ></path>
        </svg>
        Edit profile
      </a>
      <a href="/users/profile/<%= locals.user.id%>">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          id="profile"
        >
          <path
            fill="#200E32"
            d="M5.84846399,13.5498221 C7.28813318,13.433801 8.73442297,13.433801 10.1740922,13.5498221 C10.9580697,13.5955225 11.7383286,13.6935941 12.5099314,13.8434164 C14.1796238,14.1814947 15.2696821,14.7330961 15.73685,15.6227758 C16.0877167,16.317132 16.0877167,17.1437221 15.73685,17.8380783 C15.2696821,18.727758 14.2228801,19.3149466 12.4926289,19.6174377 C11.7216312,19.7729078 10.9411975,19.873974 10.1567896,19.9199288 C9.43008411,20 8.70337858,20 7.96802179,20 L6.64437958,20 C6.36753937,19.9644128 6.09935043,19.9466192 5.83981274,19.9466192 C5.05537891,19.9062698 4.27476595,19.8081536 3.50397353,19.6530249 C1.83428106,19.3327402 0.744222763,18.7633452 0.277054922,17.8736655 C0.0967111971,17.5290284 0.00163408158,17.144037 0.000104217816,16.752669 C-0.00354430942,16.3589158 0.0886574605,15.9704652 0.268403665,15.6227758 C0.72692025,14.7330961 1.81697855,14.1548043 3.50397353,13.8434164 C4.27816255,13.6914539 5.06143714,13.5933665 5.84846399,13.5498221 Z M8.00262682,-1.16351373e-13 C10.9028467,-1.16351373e-13 13.2539394,2.41782168 13.2539394,5.40035587 C13.2539394,8.38289006 10.9028467,10.8007117 8.00262682,10.8007117 C5.10240696,10.8007117 2.75131423,8.38289006 2.75131423,5.40035587 C2.75131423,2.41782168 5.10240696,-1.16351373e-13 8.00262682,-1.16351373e-13 Z"
            transform="translate(4 2)"
          ></path>
        </svg>
        Go to Profile
      </a>
    </div>

    <div class="user-container">
      <% if(user.avatar != undefined) { %>
      <img src="<%= user.avatar %>" alt="" />
      <% } else { %>
      <img
        id="logo-placeholder"
        src="<%= assetPath('img/dummy-profile.jpeg') %>"
      />
      <% } %>
      <p class="user-name"><%= user.name.substring(0, 14) %></p>
      <i class="fa-solid fa-chevron-up"></i>
    </div>
  </div>

  <% } else { %> <% } %>
</div>

<script>
  function expandFooter() {
    let footer = document.querySelector(".footer");
    let expanded = document.querySelector(".expanded");
    let userContainer = document.querySelector(".user-container");
    let chevron = document.querySelector(".fa-chevron-up");

    if (expanded.classList.contains("hide")) {
      // TODO: animate expanded using jquery from bottom to top

      expanded.classList.remove("hide");
      userContainer.style.borderRadius = "50%";
      chevron.style.transform = "rotate(0deg)";
    } else {
      expanded.classList.add("hide");
      userContainer.style.borderRadius = "0";
      chevron.style.transform = "rotate(180deg)";
    }
  }

  if (
    window.location.href.includes("home") ||
    window.location.href.includes("users/profile") ||
    window.location.href.includes("search") ||
    window.location.href.includes("upload")
  ) {
    // remove background image from left navigation
    let leftNav = document.querySelector(".left-navigation-container");

    let messageIcon = document.querySelector(".message-icon");
    let logoutButton = document.querySelector(".logout-button");
    if (window.innerWidth < 480) {
      leftNav.setAttribute(
        "style",
        "background-image: none !important; height: auto !important;"
      );
      if (window.location.href.includes("users/profile")) {
        messageIcon.style.visibility = "collapse";
        $(".message-toggle-button-sm").css({ display: "none" });
      }
      if (window.location.href.includes("home")) {
        logoutButton.style.display = "none";
      }
    } else {
      if (window.location.href.includes("users/profile")) {
        messageIcon.style.display = "none";
        logoutButton.style.display = "block";
      }
      leftNav.setAttribute(
        "style",
        "background-image: none !important; height: 100vh !important;"
      );
    }

    // listen for resize event
    window.addEventListener("resize", () => {
      if (window.innerWidth < 480) {
        leftNav.setAttribute(
          "style",
          "background-image: none !important; height: auto !important;"
        );
        if (window.location.href.includes("users/profile")) {
          let messageIcon = document.querySelector(".message-toggle-button-sm");
          messageIcon.style.display = "none";
        }
      } else {
        if (window.location.href.includes("users/profile")) {
          let messageIcon = document.querySelector(".message-toggle-button");
          messageIcon.style.display = "none";
        }
        leftNav.setAttribute(
          "style",
          "background-image: none !important; height: 100vh !important;"
        );
      }
    });
  } else if (window.location.href.includes("users/sign-in-up")) {
    let leftNav = document.querySelector(".left-navigation-container");

    if (window.innerWidth < 480) {
      leftNav.setAttribute(
        "style",
        "background-image: linear-gradient(rgba(0, 0, 0, 0.5), #000000), url('<%= assetPath('img/161.jpg') %>');background-size: cover;"
      );
    } else {
      leftNav.setAttribute(
        "style",
        "background-image: linear-gradient(#000000, rgba(0, 0, 0, 0.5)), url('<%= assetPath('img/161.jpg') %>');background-size: cover;"
      );
    }
    // listen for resize event
    window.addEventListener("resize", () => {
      if (window.innerWidth < 480) {
        leftNav.setAttribute(
          "style",
          "background-image: linear-gradient(rgba(0, 0, 0, 0.5), #000000), url('<%= assetPath('img/161.jpg') %>');background-size: cover;"
        );
      } else {
        leftNav.setAttribute(
          "style",
          "background-image: linear-gradient(#000000, rgba(0, 0, 0, 0.5)), url('<%= assetPath('img/161.jpg') %>');background-size: cover;"
        );
      }
    });
  }
</script>
